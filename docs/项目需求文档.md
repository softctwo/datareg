# 银行重要数据跨境数据管控系统 - 项目需求文档

## 1. 项目概述

### 1.1 项目背景

随着《数据安全法》、《个人信息保护法》和《数据出境安全评估办法》等法律法规的实施，银行在进行重要数据和个人信息跨境传输时面临严格的合规要求。银行需要建立完整的数据出境管控体系，确保数据跨境传输活动符合国家法律法规要求，防范数据出境风险。

### 1.2 项目目标

构建一个全面的银行重要数据跨境数据管控系统，实现以下目标：

1. **合规管控**：满足《数据安全法》《个人信息保护法》《数据出境安全评估办法》等法规要求
2. **全流程管理**：覆盖数据资产识别、场景管理、风险评估、审批流程、监控审计全生命周期
3. **自动化能力**：自动发现数据资产、智能风险评估、动态拦截脱敏
4. **可追溯性**：完整记录数据出境活动，提供审计追踪
5. **风险预警**：实时监控数据出境风险，及时预警处置

### 1.3 项目范围

#### 1.3.1 功能范围

- 数据资产分类分级管理
- 跨境传输场景备案管理
- 数据出境风险自评估（PIA/DPIA）
- 事中拦截与动态脱敏
- 传输审批流程管理
- 监控审计与异常检测
- 用户权限与访问控制
- 批量操作与数据导出

#### 1.3.2 技术范围

- 后端：FastAPI + PostgreSQL + Redis
- 前端：React 18 + TypeScript + Ant Design
- 认证：JWT Token
- 部署：容器化部署（预留）

## 2. 业务需求

### 2.1 数据资产分类分级需求

#### 2.1.1 需求描述

银行需要对内部数据资产进行全面梳理和分类分级，建立数据资产目录，识别重要数据和个人信息，为跨境传输管控提供基础数据支撑。

#### 2.1.2 功能要求

- **自动扫描发现**：系统应能自动扫描PostgreSQL数据库，发现数据表和字段信息
- **智能分类分级**：基于预定义规则，自动识别数据安全级别（核心/重要/敏感/个人/内部/公开）
- **敏感标签管理**：支持自定义敏感数据标签，如身份证、手机号、银行卡等
- **数据血缘追踪**：记录数据资产的上游和下游关系，形成数据血缘图谱
- **元数据管理**：维护数据资产的基本信息、技术属性、业务属性

#### 2.1.3 合规要求

- 《数据安全法》第二十一条：建立数据分类分级管理制度
- 《个人信息保护法》第五十一条：个人信息分类管理要求
- 金融行业数据分类分级标准

### 2.2 跨境传输场景管理需求

#### 2.2.1 需求描述

银行在进行数据出境前，需要对跨境传输场景进行备案管理，明确传输的业务目的、接收方信息、数据范围等要素。

#### 2.2.2 功能要求

- **场景备案**：支持创建跨境传输场景，包含业务类型、数据用途等基本信息
- **接收方管理**：记录境外接收方的名称、所在国家、机构类型等信息
- **传输要素管理**：定义传输频率、存储期限、安全措施、加密方式等技术要素
- **状态管理**：场景状态包括草稿、待审批、已批准、已拒绝、已过期、已暂停
- **有效期管理**：设置场景的有效期限，支持自动过期提醒

#### 2.2.3 合规要求

- 《数据出境安全评估办法》第五条：数据出境风险自评估要求
- 《个人信息保护法》第三十八条：向境外提供个人信息的条件

### 2.3 数据出境风险自评估需求

#### 2.3.1 需求描述

银行在进行重要数据和个人信息出境前，需要进行PIA（个人信息影响评估）或DPIA（数据保护影响评估），识别和评估数据出境风险。

#### 2.3.2 功能要求

- **评估模板**：提供标准化的PIA/DPIA评估模板和问题清单
- **多维度评估**：从法律环境、数据规模、安全措施、数据敏感性等维度进行评估
- **阈值检查**：自动检查是否触发监管审批门槛（100万个人信息/10万敏感个人信息）
- **风险等级计算**：基于评估结果自动计算综合风险等级（低/中/高/极高）
- **预警机制**：当数据量接近阈值时（如95%）进行预警提醒

#### 2.3.3 合规要求

- 《数据出境安全评估办法》第四条：应当申报数据出境安全评估的情形
- 《个人信息保护法》第五十五条：个人信息保护影响评估要求
- 国家网信办《个人信息出境标准合同办法》

### 2.4 事中拦截与动态脱敏需求

#### 2.4.1 需求描述

在数据跨境传输过程中，系统需要能够实时监控数据流，对违规传输进行拦截，并对敏感信息进行动态脱敏处理。

#### 2.4.2 功能要求

- **白名单策略**：已批准的传输场景自动加入白名单，允许正常传输
- **黑名单策略**：禁止特定数据资产出境，如核心业务数据
- **核心数据拦截**：严格禁止涉及国家安全的核心数据出境
- **动态脱敏引擎**：
  - 身份证号脱敏（保留前3位后4位）
  - 手机号脱敏（保留前3位后4位）
  - 银行卡号脱敏（保留后4位）
  - 姓名假名化（SHA256哈希）
  - 邮箱脱敏（遮掩@前部分）
- **拦截决策引擎**：基于规则引擎决定是否允许传输、脱敏或拦截

#### 2.4.3 合规要求

- 《数据安全法》第三十一条：关键信息基础设施运营者的数据出境安全管理要求
- 《个人信息保护法》第三十九条：个人信息出境的安全评估要求

### 2.5 传输审批流程管理需求

#### 2.5.1 需求描述

建立数据出境传输的审批流程，确保每次数据出境都有相应的审批记录，实现全程可追溯。

#### 2.5.2 功能要求

- **审批申请**：用户可以提交数据出境审批申请，关联特定场景和数据资产
- **多级审批**：支持配置多级审批流程，根据数据敏感性和风险等级确定审批层级
- **审批操作**：支持批准、拒绝、撤销等审批操作
- **审批意见**：记录审批人的审批意见和决策依据
- **传输记录**：记录实际的传输开始时间、结束时间、传输数据量

#### 2.5.3 合规要求

- 《数据出境安全评估办法》第十五条：通过数据出境安全评估的有效期
- 银行业内部数据安全管理规定

### 2.6 监控与审计需求

#### 2.6.1 需求描述

建立全面的数据出境监控和审计机制，实时监控数据出境活动，及时发现异常行为，提供完整的审计轨迹。

#### 2.6.2 功能要求

- **实时监控仪表盘**：
  - 场景总数、审批数量、传输成功率等概览统计
  - 传输趋势分析（按日期、按时间段统计）
  - 目的国分布统计
  - 风险预警信息展示
- **异常行为检测**：
  - 异常传输时间检测
  - 超出正常范围的传输量检测
  - 频繁访问行为检测
- **审计日志**：记录所有系统操作，包括创建、更新、删除、审批、传输等
- **审计查询**：支持按时间、用户、操作类型等条件查询审计记录

#### 2.6.3 合规要求

- 《网络安全法》第二十一条：网络日志留存要求
- 《数据安全法》第三十条：重要数据出境安全管理要求

### 2.7 用户权限管理需求

#### 2.7.1 需求描述

建立完善的用户权限管理体系，确保只有授权用户才能访问相应的功能和数据。

#### 2.7.2 功能要求

- **用户管理**：支持用户的增删改查，包括用户基本信息、账号状态
- **角色管理**：支持自定义角色，为角色分配相应的权限
- **权限分配**：支持细粒度的权限控制，包括功能权限和数据权限
- **认证机制**：基于JWT Token的无状态认证
- **会话管理**：支持单点登录、会话超时、强制下线等功能

#### 2.7.3 合规要求

- 《网络安全法》第二十四条：网络运营者安全管理要求
- 银行业金融机构信息科技外包风险管理指引

## 3. 非功能性需求

### 3.1 性能需求

| 指标 | 要求 |
|------|------|
| 系统响应时间 | 页面加载时间 < 3秒，API响应时间 < 1秒 |
| 并发用户数 | 支持100个并发用户同时使用 |
| 数据处理能力 | 支持单次扫描1000个数据表，处理100万条记录 |
| 数据库查询 | 复杂查询响应时间 < 5秒 |

### 3.2 可用性需求

| 指标 | 要求 |
|------|------|
| 系统可用性 | 99.5%（全年停机时间 < 44小时） |
| 故障恢复时间 | < 30分钟 |
| 数据备份 | 每日自动备份，保留30天 |
| 灾难恢复 | RTO < 4小时，RPO < 1小时 |

### 3.3 安全需求

#### 3.3.1 身份认证与授权

- 支持强密码策略（最少8位，包含大小写字母、数字、特殊字符）
- 密码错误锁定机制（连续5次失败锁定30分钟）
- 会话超时自动登出（30分钟无操作）
- 支持双因素认证（预留）

#### 3.3.2 数据安全

- 敏感数据传输加密（HTTPS/TLS 1.3）
- 数据库连接加密
- 敏感字段存储加密
- 定期安全漏洞扫描

#### 3.3.3 审计与监控

- 完整的操作日志记录
- 异常行为实时告警
- 安全事件应急响应机制

### 3.4 可扩展性需求

| 扩展维度 | 要求 |
|----------|------|
| 用户规模 | 支持1000个用户 |
| 数据资产 | 支持10万个数据资产 |
| 审批流程 | 支持100个并发审批流程 |
| 存储容量 | 支持1TB数据存储 |

### 3.5 兼容性需求

#### 3.5.1 浏览器兼容性

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

#### 3.5.2 操作系统兼容性

- Windows 10/11
- macOS 10.15+
- Linux (Ubuntu 18.04+, CentOS 7+)

#### 3.5.3 数据库兼容性

- PostgreSQL 12+
- 支持读写分离
- 支持主从复制

## 4. 约束条件

### 4.1 技术约束

- 后端必须使用Python 3.11+
- 前端必须使用TypeScript
- 数据库必须使用PostgreSQL
- 必须支持RESTful API设计
- 必须提供Swagger/OpenAPI文档

### 4.2 合规约束

- 系统必须符合《网络安全法》要求
- 系统必须符合《数据安全法》要求
- 系统必须符合《个人信息保护法》要求
- 系统必须符合《数据出境安全评估办法》要求
- 系统必须符合银行业监管要求

### 4.3 业务约束

- 必须支持银行现有的用户体系集成（预留）
- 必须支持与监管平台数据对接（预留）
- 必须支持批量数据导入导出
- 必须支持数据血缘关系追踪

### 4.4 实施约束

- 项目开发周期不超过6个月
- 必须分阶段交付，每个阶段都有可用的功能模块
- 必须提供完整的用户文档和技术文档
- 必须通过银行内部安全测试

## 5. 验收标准

### 5.1 功能验收标准

#### 5.1.1 数据资产分类分级

- [x] 能够自动扫描并发现PostgreSQL数据库中的所有表
- [x] 能够根据预定义规则自动识别数据安全级别
- [x] 能够支持自定义敏感标签管理
- [x] 能够展示数据资产之间的血缘关系

#### 5.1.2 跨境传输场景管理

- [x] 能够创建和管理跨境传输场景
- [x] 能够管理境外接收方信息
- [x] 能够设置场景的有效期和状态
- [x] 能够支持场景的审批流程
- [x] 支持批量审批和批量操作

#### 5.1.3 风险自评估

- [x] 能够执行PIA/DPIA评估流程
- [x] 能够自动检查数据量阈值
- [x] 能够计算综合风险等级
- [x] 能够生成评估报告
- [x] 支持阈值预警（95%预警）

#### 5.1.4 拦截与脱敏

- [x] 能够实施白名单和黑名单策略
- [x] 能够对敏感数据进行动态脱敏
- [x] 能够拦截核心数据出境
- [x] 能够记录拦截和脱敏操作
- [x] 支持身份证、手机号、银行卡、姓名、邮箱脱敏

#### 5.1.5 审批流程

- [x] 能够创建和管理传输审批
- [x] 能够支持多级审批流程
- [x] 能够记录审批意见和决策
- [x] 能够追踪实际传输情况
- [x] 支持批量审批功能

#### 5.1.6 监控审计

- [x] 能够展示实时监控仪表盘
- [x] 能够检测异常行为
- [x] 能够记录完整的审计日志
- [x] 能够支持多维度审计查询
- [x] 支持数据导出功能（CSV/JSON）

#### 5.1.7 用户认证与权限管理

- [x] JWT Token认证功能
- [x] 角色管理功能（CRUD）
- [x] 权限分配和管理
- [x] 用户角色分配
- [x] 权限验证功能
- [x] 角色管理界面

#### 5.1.8 批量操作功能

- [x] 批量批准场景
- [x] 批量拒绝场景
- [x] 批量批准传输
- [x] 批量拒绝传输
- [x] 批量删除资产

#### 5.1.9 数据导出功能

- [x] CSV格式导出
- [x] JSON格式导出
- [x] 数据资产导出
- [x] 场景导出
- [x] 审计日志导出

### 5.2 性能验收标准

- [ ] 系统平均响应时间 < 3秒
- [ ] 100个并发用户正常使用
- [ ] 1000个数据表扫描完成时间 < 10分钟
- [ ] 系统可用性 > 99%

### 5.3 安全验收标准

- [ ] 通过银行内部安全渗透测试
- [ ] 通过数据安全合规性检查
- [ ] 建立完善的安全事件响应机制
- [ ] 所有敏感数据都有适当的保护措施

### 5.4 文档验收标准

- [ ] 提供完整的用户操作手册
- [ ] 提供系统部署和运维手册
- [ ] 提供API接口文档
- [ ] 提供数据库设计文档

## 6. 风险评估

### 6.1 技术风险

| 风险项 | 风险等级 | 影响 | 应对措施 |
|--------|----------|------|----------|
| 数据脱敏性能影响 | 中 | 系统响应时间 | 优化脱敏算法，采用异步处理 |
| 大数据量处理 | 中 | 系统稳定性 | 分页处理，增加缓存机制 |
| 第三方组件依赖 | 低 | 功能实现 | 选择成熟稳定的组件，准备替代方案 |

### 6.2 业务风险

| 风险项 | 风险等级 | 影响 | 应对措施 |
|--------|----------|------|----------|
| 合规要求变化 | 中 | 系统功能 | 设计灵活的规则引擎，支持快速调整 |
| 用户接受度 | 中 | 系统推广 | 加强用户培训，优化用户体验 |
| 数据准确性 | 高 | 业务决策 | 建立数据质量检查机制 |

### 6.3 项目风险

| 风险项 | 风险等级 | 影响 | 应对措施 |
|--------|----------|------|----------|
| 需求变更 | 中 | 项目进度 | 建立变更控制流程，预留缓冲时间 |
| 资源不足 | 中 | 项目交付 | 合理分配资源，必要时申请外部支持 |
| 集成困难 | 低 | 系统功能 | 提前进行技术验证，制定集成方案 |

## 7. 项目里程碑

### 7.1 第一阶段：基础功能开发（2个月）

- 完成系统架构设计和技术选型
- 完成用户认证和权限管理
- 完成数据资产分类分级功能
- 完成基础的跨境场景管理

### 7.2 第二阶段：核心功能开发（2个月）

- 完成风险评估引擎
- 完成拦截与脱敏功能
- 完成传输审批流程
- 完成监控审计基础功能

### 7.3 第三阶段：完善与优化（2个月）

- 完善前端界面和用户体验
- 完成系统集成测试
- 完成性能优化和安全加固
- 完成文档编写和用户培训

---

**文档版本**: 1.0
**最后更新**: 2024年12月23日
**编写人**: 张彦龙